/* src/app/shared/components/sidebar/sidebar.component.scss */

// Variables para colores y tamaños
$sidebar-width-desktop: 240px;
$sidebar-width-tablet: 200px;
$sidebar-height-mobile: 70px; // Altura de la barra inferior en móvil
$primary-color: #007bff;
$primary-hover-color: #0056b3;
$active-bg-color: #e0eaff;
$active-text-color: #0056b3;
$text-color-default: #333333;
$border-color: #e0e0e0;
$bg-color-light: #ffffff;
$bg-color-dark-mode: #2c3e50; // Ejemplo para dark mode
$text-color-dark-mode: #ecf0f1; // Ejemplo para dark mode

.sidebar-container {
    width: $sidebar-width-desktop;
    min-height: 100vh; // Ocupa toda la altura de la vista en escritorio
    background-color: $bg-color-light;
    border-right: 1px solid $border-color;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 20px;
    position: fixed; // Fijo en el lado izquierdo
    top: 0;
    left: 0;
    font-family: 'Roboto', sans-serif;
    justify-content: space-between; // Empuja el nav al centro y logo/toggle a los extremos
    z-index: 999; // Asegura que esté por encima del contenido principal
    transition: width 0.3s ease, transform 0.3s ease, background-color 0.3s ease; // Transiciones suaves
}

.sidebar-logo {
    padding-bottom: 30px; // Espacio inferior para el logo
    img {
        width: 120px;
        height: auto;
    }
}

.sidebar-nav {
    width: 100%;
    flex: 1; // Permite que el nav ocupe el espacio disponible entre el logo y el login/toggle
    overflow-y: auto; // Permite scroll si hay muchos ítems en escritorio/tablet
}

.sidebar-nav-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.nav-link {
    display: flex;
    align-items: center;
    padding: 12px 20px;
    color: $text-color-default;
    text-decoration: none;
    font-weight: 500;
    transition: background-color 0.2s ease, color 0.2s ease;
    font-family: 'Roboto', sans-serif;
    white-space: nowrap; // Evita que el texto se rompa de línea en escritorio
}

.nav-link:hover {
    background-color: lighten($primary-color, 40%); // Fondo más claro para hover
    color: $primary-color;
}

// Estilo para los iconos (Font Awesome u otra librería)
.nav-icon {
    margin-right: 12px;
    font-size: 20px;
    flex-shrink: 0; // Evita que el icono se encoja
}

.nav-text {
    font-size: 16px;
    font-family: 'Roboto', sans-serif;
    flex-grow: 1; // Permite que el texto ocupe el espacio restante
}

.active { // Clase para el enlace activo
    background-color: $active-bg-color;
    color: $active-text-color;
    font-weight: 700; // Un poco más de peso para el activo
}

.sidebar-separator {
    width: 80%;
    border: none;
    border-top: 1px solid $border-color;
    margin: 20px 0;
}

.sidebar-login {
    width: 100%;
    display: flex;
    justify-content: center;
    padding: 1rem 0;
    margin-top: auto; // Empuja este elemento hacia abajo
}

// --- Dark Mode (ejemplo, asumiendo una clase 'dark-mode' en el body) ---
body.dark-mode {
    .sidebar-container {
        background-color: #333333;
        border-right-color: darken($border-color, 20%);
    }
    .nav-link {
        color: $text-color-dark-mode;
        &:hover {
            background-color: darken($bg-color-dark-mode, 5%);
            color: lighten($primary-color, 20%);
        }
    }
    .active {
        background-color: darken($active-bg-color, 20%);
        color: lighten($active-text-color, 20%);
    }
    .sidebar-separator {
        border-top-color: darken($border-color, 20%);
    }
}

// --- Media Queries para Responsividad ---

// Tablet y pantallas medianas (hasta 1024px)
@media (max-width: 1024px) {
    .sidebar-container {
        width: $sidebar-width-tablet; // Un poco más estrecho
        padding-left: 10px;
        padding-right: 10px;
    }
    .nav-link {
        padding: 10px 15px; // Ajusta el padding
    }
    .nav-text {
        font-size: 15px;
    }
    .nav-icon {
        font-size: 19px;
    }
    .sidebar-logo img {
        width: 100px; // Logo más pequeño
    }
}

// Móviles (hasta 768px - transformación a barra inferior)
@media (max-width: 768px) {
    .sidebar-container {
        position: fixed; // Fijo en la parte inferior
        bottom: 0;
        left: 0;
        width: 100%; // Ocupa todo el ancho
        height: $sidebar-height-mobile; // Altura fija para la barra inferior
        min-height: auto; // Deshabilita min-height de 100vh
        flex-direction: row; // Los ítems se organizan horizontalmente
        justify-content: space-around; // Distribuye los ítems uniformemente
        align-items: center;
        border-right: none; // Sin borde derecho
        border-top: 1px solid $border-color; // Borde superior para separarlo del contenido
        padding: 0; // Sin padding superior/inferior
        box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.1); // Sombra sutil en la parte superior
        background-color: $bg-color-light; // Asegura el fondo
        z-index: 1000; // Asegura que esté por encima de todo en móvil
    }

    .sidebar-logo {
        display: none; // Oculta el logo en móviles
    }

    .sidebar-separator {
        display: none; // Oculta el separador en móviles
    }

    .sidebar-nav {
        flex: 1; // Ocupa el espacio disponible
        overflow-y: hidden; // No scroll en la barra inferior
        height: 100%; // Asegura que el nav ocupe la altura de la barra
    }

    .sidebar-nav-list {
        display: flex;
        justify-content: space-around; // Distribuye los ítems de navegación
        width: 100%;
        height: 100%; // Ocupa la altura de la barra
        flex-wrap: wrap; // Permite que los ítems se envuelvan si hay muchos (aunque 9 es mucho para una barra inferior)
    }

    .nav-link {
        flex-direction: column; // Icono arriba, texto abajo
        padding: 8px 5px; // Padding reducido
        font-size: 12px; // Texto más pequeño
        text-align: center;
        flex-grow: 1; // Permite que cada enlace ocupe espacio
        justify-content: center; // Centra verticalmente el contenido del enlace
        height: 100%;
        min-width: 60px; // Ancho mínimo para cada botón en la barra inferior
    }

    .nav-icon {
        margin-right: 0; // Elimina margen derecho
        margin-bottom: 4px; // Espacio entre icono y texto
        font-size: 18px; // Tamaño de icono ajustado
    }

    .nav-text {
        font-size: 11px; // Texto aún más pequeño para móviles
        display: block; // Asegura que el texto se muestre
        white-space: normal; // Permite que el texto se rompa si es muy largo
        line-height: 1.2;
    }

    .sidebar-login {
        display: none; // Oculta la sección de cerrar sesión en la barra inferior
    }
    
    // Ajuste CRUCIAL para el contenido principal para que no quede debajo del sidebar
    // Esto debe aplicarse al <body> o al contenedor principal de tu aplicación
    body {
        padding-bottom: $sidebar-height-mobile; // Añade padding al body igual a la altura del sidebar
    }
}